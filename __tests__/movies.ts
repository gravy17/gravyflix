import request from "supertest";
process.env.JWT_SECRET = "secret";
import app from "../src/app";
import { Users } from "../src/models/User";

let cookie: string;
let created: string;

beforeAll(async () => {
  const preExisting = await Users.findOne({
    where: {
      email: "plainjane@example.com",
      password: "ofyourchoice",
    },
  });
  if (!preExisting) {
    const possibleExisting = await Users.findOne({
      where: {
        email: "plainjane@example.com",
      },
    });
    await possibleExisting?.destroy();
    await request(app).post("/api/register").send({
      fullname: "Jane Doe",
      username: "plainjane",
      email: "plainjane@example.com",
      password: "ofyourchoice",
      confirm_password: "ofyourchoice",
    });
    const prepRes = await request(app).post("/api/login").send({
      username: "plainjane",
      password: "ofyourchoice",
    });
    cookie = prepRes.header["set-cookie"].map((ck: string) => {
      return ck.split(";")[0];
    }).join(";");
  }
});

describe("Tests Get Movies Endpoint", () => {
  it("gets all movies", async() => {
    const res = await request(app).get("/api/movies");
    expect(res.status).toBe(200);
  })
});

describe("Tests Create Movie Endpoint", () => {
  it("creates a movie", async() => { 
    const res = await request(app).post("/api/movies").set('Cookie', cookie).send({
      "title": "Gods Must Be Crazy",
      "description": "Such a blasphemous title",
      "image": "",
      "price": 5000
    })
    expect(res.status).toBe(201);
    created = res.body.created.id;
  })
});

describe("Tests Get Movie Endpoint", () => {
  it("gets a movie", async() => {
    const res = await request(app).get("/api/movies/" + created);
    expect(res.status).toBe(200);
  })
})

describe("Tests Update Movie Endpoint", () => {
  it("updates a movie", async () => {
    const res = await request(app)
      .patch("/api/movies/" + created)
      .set("Cookie", cookie)
      .send({
        image:
          "data:image/jpeg;base64,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",
        price: 3500,
      });
    expect(res.status).toBe(200);
  });
});

describe("Tests Delete Movie Endpoint", () => {
  it("deletes a movie", async () => {
    const res = await request(app)
      .delete("/api/movies/" + created)
      .set('Cookie', cookie);
    expect(res.status).toBe(200);
  });
});